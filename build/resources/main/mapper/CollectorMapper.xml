<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mqtt.demo.mapper.CollectorMapper">
    <resultMap id="collectValMap" type="com.mqtt.demo.entity.CollectData">

    </resultMap>

    <!--<select id="getCollectValuesBetween" parameterType="java.util.Map" resultMap="collectValMap">-->
        <!--select collecttime,channel, c.name keyword,value1,value2,value3,value4,value5,value6 from perf a join hardware b-->
        <!--join module c on a.clientid = b.clientid and c.keyword = b.type where a.clientid = #{clientid} and-->
        <!--<![CDATA[ collecttime >= #{startTime} and collecttime <= #{endTime} ]]>-->
    <!--</select>-->

    <select id="getCollectValuesBetween" parameterType="java.util.Map" resultMap="collectValMap">
        select collecttime,channel, value1,value2,value3,value4,value5,value6 from perf a join hardware b
        on a.clientid = b.clientid where a.clientid = #{clientid} and <![CDATA[ collecttime >= #{startTime} and collecttime <= #{endTime} ]]>
    </select>

    <!--<select id="getCollectValuesBetween" parameterType="java.util.Map" resultMap="collectValMap">-->
        <!--select a.clientid, collecttime, channel, c.name keyword, value1,value2,value3,value4,value5,value6 from hardware a-->
        <!--left join perf b on a.clientid = b.clientid left join module c on c.keyword = a.type-->
        <!--where a.type != 'CONTROLLER' and a.clientid = #{clientid} and <![CDATA[ collecttime >= #{startTime} and collecttime <= #{endTime} ]]>-->
    <!--</select>-->

    <select id="getLatestCollectValue" resultMap="collectValMap">
        select collecttime,keyword,value1 from perf where clientid=#{clientid} order by collecttime desc limit 1
    </select>
</mapper>